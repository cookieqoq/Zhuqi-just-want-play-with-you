<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>首頁 - 竹崎導覽</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles/game.css">
    <link rel="icon" href="images/logo.png" type="image/png">
    <script src="scripts/game-redirect.js"></script>
    <style>
        /* 背景圖片輪播容器 */
        .homepage-background-container {
            position: fixed;
            top: 120px; /* 導覽列高度 */
            left: 0;
            width: 100%;
            height: calc(100vh - 120px);
            z-index: -1;
            overflow: hidden;
        }

        .homepage-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0;
            transition: opacity 2s ease-in-out;
            cursor: pointer;
        }

            .homepage-slide.active {
                opacity: 1;
                z-index: 1;
            }

            .homepage-slide:hover {
                filter: brightness(1.1);
            }

        /* 背景遮罩層 */
        .homepage-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.2);
            z-index: 1;
            pointer-events: none;
        }

        /* 當前標題顯示容器 - 移除序號 */
        .homepage-current-title {
            position: fixed;
            top: 50%;
            right: 80px;
            transform: translateY(-50%);
            z-index: 10;
            background: rgba(0, 0, 0, 0.6);
            padding: 40px 50px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(15px);
            max-width: 400px;
            transition: all 0.5s ease;
            pointer-events: none;
        }

            .homepage-current-title:hover {
                transform: translateY(-50%) scale(1.05);
                box-shadow: 0 12px 40px rgba(0, 0, 0, 0.6);
            }

        .current-title-text {
            font-size: 48px;
            font-weight: 900;
            color: #ffffff;
            text-align: center;
            line-height: 1.3;
            letter-spacing: 2px;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8);
            margin: 0;
        }

        .current-title-decoration {
            width: 60px;
            height: 4px;
            background: #ffffff;
            margin: 20px auto 0;
            border-radius: 2px;
        }

        /* 輪播指示器 */
        .homepage-indicators {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 10;
        }

        .homepage-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.8);
        }

            .homepage-indicator.active {
                background: white;
                width: 30px;
                border-radius: 6px;
            }

        /* 主要內容區樣式 */
        .main-content {
            position: relative;
            z-index: 1;
            min-height: calc(100vh - 120px);
            padding: 40px 0;
        }

        .content-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 32px;
            font-weight: bold;
            color: #654321;
            margin-bottom: 20px;
            border-bottom: 3px solid #6B8E23;
            padding-bottom: 10px;
        }

        /* 導覽列單一底色背景覆蓋 */
        .navbar-image-container {
            background-image: none !important;
            background: linear-gradient(135deg, #afeeee 0%, #e0ffff 100%) !important;
        }

        /* 響應式設計 */
        @media (max-width: 768px) {
            .homepage-background-container {
                top: 100px;
                height: calc(100vh - 100px);
            }

            .homepage-current-title {
                right: 30px;
                padding: 25px 35px;
                max-width: 280px;
            }

            .current-title-text {
                font-size: 32px;
            }

            .content-section {
                padding: 20px;
            }

            .section-title {
                font-size: 24px;
            }
        }

        @media (max-width: 576px) {
            .homepage-current-title {
                right: 50%;
                transform: translate(50%, -50%);
                padding: 20px 30px;
                max-width: 250px;
            }

                .homepage-current-title:hover {
                    transform: translate(50%, -50%) scale(1.02);
                }

            .current-title-text {
                font-size: 28px;
            }
        }

        /* 氣候方塊設計 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Microsoft JhengHei", Arial, sans-serif;
            background-color: #f5f5f5;
        }

        .weather {
            position: absolute;
            bottom: 30px;
            left: 30px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            gap: 8px;
            backdrop-filter: blur(10px);
            max-width: 150px;
        }

        .weather-location {
            font-size: 13px;
            font-weight: bold;
            color: #333;
            text-align: center;
        }

        .weather-date {
            font-size: 11px;
            color: #666;
            text-align: center;
            margin-top: -4px;
        }

        .weather-main {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .sun-icon {
            width: 35px;
            height: 35px;
            background: radial-gradient(circle, #FFD700, #FFA500);
            border-radius: 50%;
            position: relative;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            animation: rotate 20s linear infinite;
            flex-shrink: 0;
        }

            .sun-icon::before {
                content: '';
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 24px;
                height: 24px;
                background: #FFEB3B;
                border-radius: 50%;
            }

            /* 雲朵圖標 */
            .sun-icon.cloudy {
                background: linear-gradient(135deg, #E0E0E0, #BDBDBD);
                box-shadow: 0 0 10px rgba(189, 189, 189, 0.5);
            }

                .sun-icon.cloudy::before {
                    background: #F5F5F5;
                }

            /* 雨天圖標 */
            .sun-icon.rainy {
                background: linear-gradient(135deg, #90A4AE, #607D8B);
                box-shadow: 0 0 10px rgba(96, 125, 139, 0.5);
            }

                .sun-icon.rainy::before {
                    background: #CFD8DC;
                }

        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        .weather-info {
            text-align: left;
        }

        .temperature {
            font-size: 20px;
            font-weight: bold;
            color: #FF6B6B;
            line-height: 1;
        }

        .weather-desc {
            font-size: 11px;
            color: #666;
            margin-top: 2px;
        }

        .more-weather-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 11px;
            transition: transform 0.3s, box-shadow 0.3s;
            font-weight: bold;
            white-space: nowrap;
        }

            .more-weather-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 3px 10px rgba(102, 126, 234, 0.4);
            }
    </style>
</head>
<body>
    <!-- 導覽列圖片容器 - 固定在頂部 -->
    <div class="navbar-image-container">
        <!-- 遮罩層 -->
        <div class="navbar-overlay"></div>

        <!-- 導覽內容 -->
        <div class="navbar-content">
            <!-- Logo/品牌 -->
            <a href="index.html" class="navbar-brand-custom">竹想一崎玩-首頁</a>

            <!-- 導覽選單 -->
            <ul class="navbar-menu">
                <li><a href="map/index.html">竹崎地圖</a></li>
                <li><a href="comments.html">留言板</a></li>
                <li><a href="introduction.html">竹崎簡介</a></li>
                <li><a href="we/we.html">關於我們</a></li>
                <li><a href="successPlz/index.html">遊戲導覽</a></li>
            </ul>

            <!-- 返回首頁按鈕 -->
            <a href="index.html" class="back-home-btn">返回選擇頁</a>
        </div>
    </div>

    <!--天氣方塊-->
    <div class="weather">
        <div class="weather-location">竹崎鄉天氣</div>
        <div class="weather-date" id="weather-date">載入中...</div>
        <div class="weather-main">
            <div class="sun-icon" id="weather-icon"></div>
            <div class="weather-info">
                <div class="temperature" id="temperature">載入中...</div>
                <div class="weather-desc" id="weather-desc">-</div>
            </div>
        </div>
        <button class="more-weather-btn" onclick="window.open('https://www.cwa.gov.tw/V8/C/W/County/County.html?CID=10010', '_blank')">
            查看更多 →
        </button>
    </div>

    <!--氣候方塊腳本-->
    <script>

        // 更新日期（如果需要顯示在其他地方）
        const today = new Date();
        const weekDays = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'];
        const dateText = `${today.getMonth() + 1}月${today.getDate()}日 ${weekDays[today.getDay()]}`;
        document.getElementById('weather-date').textContent = dateText;
        // 獲取天氣資料
        async function getWeather() {
            try {
                // 使用 OpenWeatherMap API（竹崎鄉的座標）
                const lat = 23.5186;
                const lon = 120.5464;
                const apiKey = 'f99891c7cd3469f38d7f11a7640f6ae1'; // 需要註冊 OpenWeatherMap 獲取 API Key

                // 使用免費的 Open-Meteo API（不需要 API Key）
                const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weather_code&timezone=Asia/Taipei`;

                const response = await fetch(url);
                const data = await response.json();

                if (data.current) {
                    const temp = Math.round(data.current.temperature_2m);
                    const weatherCode = data.current.weather_code;

                    // 更新溫度
                    document.getElementById('temperature').textContent = `${temp}°C`;

                    // 根據天氣代碼更新天氣描述和圖標
                    const weatherIcon = document.getElementById('weather-icon');
                    const weatherDesc = document.getElementById('weather-desc');

                    // WMO Weather codes
                    if (weatherCode === 0) {
                        weatherDesc.textContent = '晴天';
                        weatherIcon.className = 'sun-icon';
                    } else if (weatherCode >= 1 && weatherCode <= 3) {
                        weatherDesc.textContent = '多雲';
                        weatherIcon.className = 'sun-icon cloudy';
                    } else if (weatherCode >= 51 && weatherCode <= 67) {
                        weatherDesc.textContent = '雨天';
                        weatherIcon.className = 'sun-icon rainy';
                    } else if (weatherCode >= 71 && weatherCode <= 77) {
                        weatherDesc.textContent = '雪天';
                        weatherIcon.className = 'sun-icon cloudy';
                    } else if (weatherCode >= 80 && weatherCode <= 99) {
                        weatherDesc.textContent = '陣雨';
                        weatherIcon.className = 'sun-icon rainy';
                    } else {
                        weatherDesc.textContent = '多雲';
                        weatherIcon.className = 'sun-icon cloudy';
                    }
                }
            } catch (error) {
                console.error('獲取天氣失敗:', error);
                // 如果 API 失敗，顯示預設值
                document.getElementById('temperature').textContent = '28°C';
                document.getElementById('weather-desc').textContent = '晴天';
            }
        }

        // 頁面載入時獲取天氣
        getWeather();

        // 每30分鐘更新一次天氣
        setInterval(getWeather, 30 * 60 * 1000);
    </script>

    <!-- 背景圖片輪播容器 -->
    <div class="homepage-background-container">
        <!-- 背景輪播圖片 - 動態載入 -->
        <div id="homepage-slides-container"></div>

        <!-- 背景遮罩層 -->
        <div class="homepage-overlay"></div>
    </div>

    <!-- 當前標題顯示 - 移除序號 -->
    <div class="homepage-current-title" id="homepage-current-title">
        <h2 class="current-title-text" id="current-title-text">竹崎火車站</h2>
        <div class="current-title-decoration"></div>
    </div>

    <!-- 輪播指示器 -->
    <div class="homepage-indicators" id="homepage-indicators-container"></div>

    <!-- 主要內容區 -->


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // 導覽列現在使用單一底色背景（棕色漸層）

        // ==================== 主頁面背景輪播 ====================
        // 定義 images/hp_img 資料夾中的圖片列表、對應標題及連結
        const homepageImages = [
            { path: 'images/hp_img/hp1.jpg', title: '竹崎火車站', link: 'map/station.html' },
            { path: 'images/hp_img/hp2.jpg', title: '奮起湖火車站', link: 'map/hustation.html' },
            { path: 'images/hp_img/hp3.jpg', title: '奮起湖老街', link: 'map/hu.html' },
            { path: 'images/hp_img/hp5.jpg', title: '竹崎親水公園-兒童戲水區', link: 'map/park.html' },
            { path: 'images/hp_img/noodle.jpg', title: '竹崎外省麵', link: 'map/noodle.html' },
            { path: 'images/hp_img/hp7.jpg', title: '觀音瀑布', link: 'map/fall.html' },
            { path: 'images/hp_img/hp8.jpg', title: '奮起湖老街', link: 'map/hu.html' }
            // 如需新增更多圖片，直接在此處添加物件
            // { path: 'images/hp_img/hp9.jpg', title: '新景點名稱', link: 'your-link.html' },
        ];

        // 動態產生背景輪播元素
        const homepageSlidesContainer = document.getElementById('homepage-slides-container');
        const homepageIndicatorsContainer = document.getElementById('homepage-indicators-container');
        const currentTitleText = document.getElementById('current-title-text');

        // 回圈建立所有背景圖片元素和指示器
        homepageImages.forEach((item, index) => {
            // 創建背景圖片元素
            const slide = document.createElement('div');
            slide.className = `homepage-slide${index === 0 ? ' active' : ''}`;
            slide.style.backgroundImage = `url('${item.path}')`;
            slide.setAttribute('data-index', index);
            slide.setAttribute('data-link', item.link);

            // 添加點擊事件 - 跳轉到對應連結
            slide.onclick = () => {
                window.location.href = item.link;
            };

            homepageSlidesContainer.appendChild(slide);

            // 創建指示器
            const indicator = document.createElement('span');
            indicator.className = `homepage-indicator${index === 0 ? ' active' : ''}`;
            indicator.setAttribute('data-index', index);
            indicator.onclick = () => goToHomepageSlide(index);
            homepageIndicatorsContainer.appendChild(indicator);
        });

        // 背景輪播功能變數
        let currentHomepageSlide = 0;
        const homepageSlides = document.querySelectorAll('.homepage-slide');
        const homepageIndicators = document.querySelectorAll('.homepage-indicator');
        const totalHomepageSlides = homepageSlides.length;

        // 更新當前標題顯示（移除序號）
        function updateCurrentTitle(index) {
            const currentItem = homepageImages[index];
            currentTitleText.textContent = currentItem.title;
        }

        // 顯示指定的背景圖片和標題
        function showHomepageSlide(index) {
            // 移除所有 active 類別
            homepageSlides.forEach(slide => slide.classList.remove('active'));
            homepageIndicators.forEach(indicator => indicator.classList.remove('active'));

            // 添加 active 類別到當前項目
            if (homepageSlides[index]) {
                homepageSlides[index].classList.add('active');
                homepageIndicators[index].classList.add('active');
                updateCurrentTitle(index);
            }
        }

        // 切換到下一張背景圖片
        function nextHomepageSlide() {
            currentHomepageSlide = (currentHomepageSlide + 1) % totalHomepageSlides;
            showHomepageSlide(currentHomepageSlide);
        }

        // 跳轉到指定的背景圖片
        function goToHomepageSlide(index) {
            currentHomepageSlide = index;
            showHomepageSlide(currentHomepageSlide);
        }

        // 初始化第一個標題
        updateCurrentTitle(0);

        // 自動輪播 - 每6秒切換一次
        if (totalHomepageSlides > 0) {
            setInterval(nextHomepageSlide, 6000);
        }

        // 圖片載入錯誤處理
        homepageSlides.forEach((slide, index) => {
            const img = new Image();
            img.onerror = () => {
                console.warn(`背景圖片載入失敗: ${homepageImages[index].path}`);
                // 如果圖片載入失敗，使用漸層背景
                slide.style.backgroundImage = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            };
            img.src = homepageImages[index].path;
        });

        // ==================== 平滑滾動功能 ====================
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    const offset = 140; // 導覽列高度 120px + 間距 20px
                    const targetPosition = target.offsetTop - offset;
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // ==================== 頁面載入完成提示 ====================
        console.log(`✅ 首頁已載入完成`);
        console.log(`🖼️ 主頁面背景圖片數量: ${homepageImages.length}`);
        console.log(`💡 如需修改背景圖片，請編輯 homepageImages 陣列`);
        console.log(`🔗 點擊背景圖片可跳轉到對應頁面`);
    </script>
</body>
</html>